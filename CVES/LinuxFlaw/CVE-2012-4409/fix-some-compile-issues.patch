From 9c8913989c20200b699320d900b782bdc63b127c Mon Sep 17 00:00:00 2001
From: SophieTwilight <zz1138131148zz@gmail.com>
Date: Fri, 24 Sep 2021 19:36:54 +0800
Subject: [PATCH] fix some compile issues

---
 src/errors.c  | 1 +
 src/gaaout.c  | 3 ++-
 src/xmalloc.c | 1 +
 3 files changed, 4 insertions(+), 1 deletion(-)

diff --git a/src/errors.c b/src/errors.c
index 3b9ce18..c68c274 100644
--- a/src/errors.c
+++ b/src/errors.c
@@ -19,6 +19,7 @@
 /* $Id: errors.c,v 1.1.1.1 2000/05/22 13:09:26 nmav Exp $ */
 
 #include <stdio.h>
+#include <stdlib.h>
 
 extern int quiet;
 
diff --git a/src/gaaout.c b/src/gaaout.c
index d15d6ed..dea88b8 100644
--- a/src/gaaout.c
+++ b/src/gaaout.c
@@ -1,5 +1,6 @@
 #include <stdio.h>
 #include <string.h>
+#include "xmalloc.h"
 
 #ifndef GAA_NO_WIN32
 #if defined(_WIN32) || defined(__WIN32__) || defined(WIN32) || defined(WINDOWS)
@@ -237,7 +238,7 @@ extern "C"
 #define GAAERROR    \
 {                   \
 gaa_error = 1;      \
-return;        \
+return 1;        \
 }
 
 char *gaa_current_option;
diff --git a/src/xmalloc.c b/src/xmalloc.c
index 3bdfb77..ae32c0a 100644
--- a/src/xmalloc.c
+++ b/src/xmalloc.c
@@ -20,6 +20,7 @@
 
 #include <defines.h>
 #include <extra.h>
+#include "xmalloc.h"
 
 static char rcsid[] = "$Id: xmalloc.c,v 1.4 2001/09/08 10:26:39 nmav Exp $";
 
-- 
2.25.1

