--- src/parse_emelody.c.orig    2023-04-13
+++ src/parse_emelody.c         2023-04-13
@@ -59,7 +59,7 @@
   int ptr, num;
   int n, x;
 
-  while(!feof(in->in))
+  while(fgets(song, sizeof(song), in->in) != NULL)
   {
     x=0;
     n=0;
@@ -67,7 +67,6 @@
     song[1023]=0;
 
     //fgets(song,1024,in->in);
-    gets(song);
     while(song[x]!=0)
     {
       if (song[x]=='\n')
