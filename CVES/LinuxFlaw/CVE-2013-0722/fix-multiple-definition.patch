From 1ac44a118fb285cd133208f460e0a1ebd92512cf Mon Sep 17 00:00:00 2001
From: SophieTwilight <zz1138131148zz@gmail.com>
Date: Sat, 30 Oct 2021 13:14:59 +0800
Subject: [PATCH] fix multiple definition

---
 include/ec_threads.h | 2 +-
 src/ec_threads.c     | 2 ++
 2 files changed, 3 insertions(+), 1 deletion(-)

diff --git a/include/ec_threads.h b/include/ec_threads.h
index b8c089d..deda052 100644
--- a/include/ec_threads.h
+++ b/include/ec_threads.h
@@ -14,7 +14,7 @@ struct ec_thread {
 };
 
 /* a value to be used to return errors in fuctcions using pthread_t values */
-pthread_t EC_PTHREAD_NULL;
+extern pthread_t EC_PTHREAD_NULL;
 #define EC_PTHREAD_SELF EC_PTHREAD_NULL
 #define PTHREAD_ID(id)  (*(unsigned long*)&(id)) 
 
diff --git a/src/ec_threads.c b/src/ec_threads.c
index 487de83..30db17b 100644
--- a/src/ec_threads.c
+++ b/src/ec_threads.c
@@ -25,6 +25,8 @@
 #include <pthread.h>
 #include <errno.h>
 
+pthread_t EC_PTHREAD_NULL;
+
 struct thread_list {
    struct ec_thread t;
    LIST_ENTRY (thread_list) next;
-- 
2.30.2

